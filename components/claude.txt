// app/login.tsx
"use client";

import { useState } from "react";
//import { Auth, AuthViewProps } from "@supabase/auth-ui-react";
import { Auth } from "@supabase/auth-ui-react";
import { ThemeSupa } from "@supabase/auth-ui-shared";
//import { createServerComponentClient } from "@supabase/ssr/client";
//import { createClient } from "@/utils/supabase/server";
import { createClient } from "@/utils/supabase/client";
import { cookies } from "next/headers";

export default async function Claude() {
  const [mounted, setMounted] = useState(false);

  const cookieStore = cookies();
  const supabase = createClient();
  // const supabaseClient = createClient({
  //   cookies,
  // });

  const { data: user } = await supabase.auth.getUser();

  // Ensure that the component is mounted before rendering the Auth component
  // to avoid server-side rendering issues
  if (typeof window !== "undefined") {
    setMounted(true);
  }

  const viewProps: any = {
    supabase,
    appearance: {
      theme: ThemeSupa,
      style: {
        input: { borderRadius: "4px" },
        button: { borderRadius: "4px" },
      },
    },
    theme: "dark",
    providers: ["email"],
  };

  return (
    <div>
      {mounted && (
        <>
          {!user?.user ? (
            <Auth {...viewProps} />
          ) : (
            <div>
              <p>You are logged in as {user?.user?.email}</p>
              {/* Add your logged-in user experience here */}
            </div>
          )}
        </>
      )}
    </div>
  );
}
